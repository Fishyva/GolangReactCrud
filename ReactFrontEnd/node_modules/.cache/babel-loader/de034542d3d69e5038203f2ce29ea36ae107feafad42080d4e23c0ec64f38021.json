{"ast":null,"code":"var _jsxFileName = \"/Users/shechemharrison/go-react-course/ReactFrontEnd/src/Components/Login.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useNavigate, useOutletContext } from \"react-router-dom\";\nimport Input from \"./form/Input\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const {\n    setJwtToken\n  } = useOutletContext();\n  const {\n    setAlertClassName,\n    setAlertMessage\n  } = useOutletContext();\n  const navigate = useNavigate();\n  function successAlert() {\n    setAlertClassName(\"d-none\");\n    setAlertMessage(\"\");\n  }\n  const handleSubmit = event => {\n    event.preventDefault();\n    let payload = {\n      email: email,\n      password: password\n    };\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      credentials: \"include\",\n      body: JSON.stringify(payload)\n    };\n    fetch(\"/authenticate\", requestOptions).then(response => response.json()).then(data => {\n      if (data.error) {\n        setAlertClassName(\"alert-danger\");\n        setAlertMessage(data.message);\n      } else {\n        setJwtToken(data.access_token);\n        console.log();\n        setAlertClassName(\"d-none\");\n        setAlertMessage(\"\");\n        navigate(\"/\");\n      }\n    }).catch(error => {\n      setAlertClassName(\"alert-danger\");\n      setAlertMessage(error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 offset-md-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \" Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          title: \"Email Address\",\n          type: \"email\",\n          className: \"form-control\",\n          name: \"email\",\n          autoComplete: \"email-new\",\n          onChange: event => setEmail(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          title: \"Password\",\n          type: \"password\",\n          className: \"form-control\",\n          name: \"password\",\n          autoComplete: \"password-new\",\n          onChange: event => setPassword(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          value: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(Login, \"KAFPoUWa1TRbz4pW+fj8BHgFJPc=\", false, function () {\n  return [useOutletContext, useOutletContext, useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useNavigate","useOutletContext","Input","Login","email","setEmail","password","setPassword","setJwtToken","setAlertClassName","setAlertMessage","navigate","successAlert","handleSubmit","event","preventDefault","payload","requestOptions","method","headers","credentials","body","JSON","stringify","fetch","then","response","json","data","error","message","access_token","console","log","catch","target","value"],"sources":["/Users/shechemharrison/go-react-course/ReactFrontEnd/src/Components/Login.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useNavigate, useOutletContext } from \"react-router-dom\";\nimport Input from \"./form/Input\";\n\nfunction Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const { setJwtToken } = useOutletContext();\n  const { setAlertClassName, setAlertMessage } = useOutletContext();\n  const navigate = useNavigate();\n\n  function successAlert() {\n    setAlertClassName(\"d-none\");\n    setAlertMessage(\"\");\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    let payload = {\n      email: email,\n      password: password,\n    };\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      credentials: \"include\",\n      body: JSON.stringify(payload),\n    };\n\n    fetch(\"/authenticate\", requestOptions)\n      .then((response) => response.json())\n      .then((data) => {\n          if (data.error) {\n              setAlertClassName(\"alert-danger\")\n              setAlertMessage(data.message)\n          } else {\n            setJwtToken(data.access_token)\n            console.log()\n              setAlertClassName(\"d-none\")\n              setAlertMessage(\"\")\n              navigate(\"/\")\n        }\n      })\n        .catch(error => {\n            setAlertClassName(\"alert-danger\")\n            setAlertMessage(error)\n      })\n  };\n  return (\n    <>\n      <div className=\"col-md-6 offset-md-3\">\n        <h2> Login</h2>\n        <hr />\n        <form onSubmit={handleSubmit}>\n          <Input\n            title=\"Email Address\"\n            type=\"email\"\n            className=\"form-control\"\n            name=\"email\"\n            autoComplete=\"email-new\"\n            onChange={(event) => setEmail(event.target.value)}\n          />\n          <Input\n            title=\"Password\"\n            type=\"password\"\n            className=\"form-control\"\n            name=\"password\"\n            autoComplete=\"password-new\"\n            onChange={(event) => setPassword(event.target.value)}\n          />\n          <input type=\"submit\" className=\"btn btn-primary\" value=\"Login\" />\n        </form>\n      </div>\n    </>\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}